<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.smartpensionspringboot.ljb.dao.AskDao">
    <resultMap id="askmap" type="recAsk">
        <id column="ask_id" property="askId"/>
        <result column="ask_name" property="askName"/>
        <result column="relationship" property="relationship"/>
        <result column="ask_date" property="askDate"/>
        <result column="phone" property="phone"/>
        <result column="ask_way" property="askWay"/>
        <result column="ask_type" property="askType"/>
        <result column="receiver" property="receiver"/>
        <result column="ask_centent" property="askCentent"/>
        <result column="ctime" property="ctime"/>
        <result column="utime" property="utime"/>
        <result column="dtime" property="dtime"/>
    </resultMap>

<!--    获取所有的咨询人信息 -->
    <select id="getAllAsk" resultMap="askmap">
        select * from rec_ask
    </select>

<!--    添加咨询人信息-->
    <insert id="addAsk" parameterType="recAsk" useGeneratedKeys="true" keyProperty="askId">
        INSERT INTO rec_ask(`ask_name`,`relationship`,`ask_date`,`phone`,`ask_way`,`ask_type`,`receiver`,`ask_centent`,`ctime` )
        VALUES(#{askName},#{relationship},#{askDate},#{phone},#{askWay},#{askType},#{receiver},#{askCentent},#{ctime});
    </insert>

<!--    删除咨询人信息-->
    <delete id="delAsk" parameterType="Long">
        delete from rec_ask where ask_id = #{id}
    </delete>

<!--    修改咨询人信息-->
    <update id="upAsk" parameterType="recAsk">
        update rec_ask
        <set>
            <if test="askName != null">
                `ask_name` = #{askName},
            </if>
            <if test="relationship != null">
                `relationship` = #{relationship},
            </if>
            <if test="askDate != null">
                `ask_date` = #{askDate},
            </if>
            <if test="phone != null">
                `phone` = #{phone},
            </if>
            <if test="askWay != null">
                `ask_way` = #{askWay},
            </if>
            <if test="askType != null">
                `ask_type` = #{askType},
            </if>
            <if test="receiver != null">
                `receiver` = #{receiver},
            </if>
            <if test="askCentent != null">
                `ask_centent` = #{askCentent},
            </if>
        </set>
        WHERE `ask_id` = #{askId}
    </update>
</mapper>